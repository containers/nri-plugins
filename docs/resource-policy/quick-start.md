# Quick-start

The following describes the minimum number of steps to get started with NRI
Resource Policy plugin.

## Pre-requisites

- containerd or cri-o container runtime installed and running, and also
  NRI feature enabled.
- kubelet installed on your nodes

Note that for both the containerd and cri-o must have NRI support enabled.
For containerd, the NRI is currently only available in 1.7beta or later release.
For cri-o it is recommended to use version 1.26.0 or later.

## Setup NRI Resource Policy Plugin

First, compile the resource plugins and create deployment image.

```console
git clone https://github.com/containers/nri-plugins
make && make images
```

### Deploy Daemonset

The build/ directory will contain the needed images and deployment
files. Copy the plugin .yaml file and corresponding image file into
the node and deploy it there.

For example:

```console
ls build/images
   nri-resource-policy-balloons-deployment.yaml
   nri-resource-policy-balloons-image-ed6fffe77071.tar
   nri-resource-policy-topology-aware-deployment.yaml
   nri-resource-policy-topology-aware-image-9797e8de7107.tar
```

Copy the nri-resource-policy-topology-aware-deployment.yaml and the
latest tar file, that was generated by the `make images` command.

This will create a fresh config file and backup the old one if it existed:

```console
[ -f /etc/containerd/config.toml ] && cp /etc/containerd/config.toml.backup
containerd config default > /etc/containerd/config.toml
```

Edit the `/etc/containerd/config.toml` file and set `plugins."io.containerd.nri.v1.nri"`
option `disable = true` to `disable = false` and restart containerd.

If you are running cri-o, the NRI enabling can be done like this:

```console
mkdir -p /etc/crio/crio.conf.d
cat > /etc/crio/crio.conf.d/10-enable-nri.conf <<EOF
[crio.nri]
enable_nri = true
EOF
```

Then you can deploy for example the topology-aware policy.

```console
kubectl apply -f nri-resource-policy-topology-aware-deployment.yaml
```

Verify that the pod is running:

```
   $ kubectl -n kube-system get pods
   NAMESPACE     NAME                        READY   STATUS    RESTARTS   AGE
   kube-system   nri-resource-policy-nblgl   1/1     Running   0          18m
```

## What Next

Congratulations, you now have nri-resource-policy running on your system and
policying container resource allocations. Next, you could see:
- [Installation](installation.md) for more installation options and
  detailed installation instructions
- [Setup](setup.md) for details on setup and usage
- [Node Agent](node-agent.md) for setting up dynamic configuration
