apiVersion: v1
kind: Pod
metadata:
  name: pod-memtierd
  labels:
    app: pod-memtierd
spec:
  hostPID: true
  containers:
    - name: pod-memtierd
      args:
        - --host-root
        - /host
      image: <your registry>/memtierd-nri
      imagePullPolicy: Always
      securityContext:
        privileged: true
      volumeMounts:
        - name: nri-socket
          mountPath: /var/run/nri/nri.sock
        - name: host-volume
          mountPath: /host
        - name: host-bitmap
          mountPath: /sys/kernel/mm/page_idle/bitmap
  volumes:
    - name: nri-socket
      hostPath:
        path: /var/run/nri/nri.sock
    - name: host-volume
      hostPath:
        path: /
    - name: host-bitmap
      hostPath:
        path: /sys/kernel/mm/page_idle/bitmap
